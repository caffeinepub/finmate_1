{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Fix Check Balance on Home page with PIN or fingerprint authentication",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Add PIN or biometric authentication gate to the 'Check Balance' quick-action button on the Home page before revealing the balance",
      "acceptanceCriteria": [
        "Tapping 'Check Balance' on the Home page opens a PIN entry prompt or offers a fingerprint/biometric option.",
        "The balance is only revealed after the user successfully enters their PIN or passes biometric authentication.",
        "If PIN entry is cancelled or fails, the balance remains hidden.",
        "The BalanceCard auto-hides the balance after 30 seconds of visibility (existing behaviour preserved).",
        "The fingerprint/biometric option is shown alongside the PIN option, consistent with the PinEntry screen pattern."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/Home.tsx",
          "operation": "modify",
          "description": "Add state management for showing the PinConfirmationModal when the 'Check Balance' quick-action button is clicked. Wire the modal's onSuccess callback to set showBalanceCard to true, and onCancel to keep it hidden. This ensures the balance is only revealed after successful PIN entry or biometric authentication."
        },
        {
          "path": "frontend/src/components/PinConfirmationModal.tsx",
          "operation": "modify",
          "description": "Add a biometric/fingerprint authentication option to the modal UI, similar to the pattern used in PinEntry.tsx. Include a fingerprint icon button that calls simulateBiometric from usePinAuth. On successful biometric authentication, invoke onSuccess immediately. Ensure the biometric button is positioned prominently alongside the PIN keypad for easy user access."
        }
      ]
    }
  ]
}